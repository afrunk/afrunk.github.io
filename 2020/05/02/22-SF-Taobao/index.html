<!DOCTYPE html>
<html lang>
  <head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="阿里司法拍卖数据可视化"><meta name="keywords" content="Django, Mysql, Spyder, afrunk"><link rel="alternate" href="/default" title="afrunk"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0">
<link rel="canonical" href="http://afrunk.github.io/2020/05/02/22-SF-Taobao/">

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css"><link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css"><script type="text/x-mathjax-config">
    MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0">

<script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":true,"latex":true};
</script>

    <title>阿里司法拍卖数据可视化 - afrunk</title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">afrunk</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">Home
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">Archivew
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags
          </li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories
          </li>
      </a><a href="/MachineLearning/">
        <li class="mobile-menu-item">机器学习
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">afrunk</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Archivew
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            Tags
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/categories/">
            Categories
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/MachineLearning/">
            机器学习
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">阿里司法拍卖数据可视化
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-05-02
        </span><span class="post-category">
            <a href="/categories/实战项目/">实战项目</a>
            </span>
        </div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spyder"><span class="toc-text">Spyder</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#阿里司法拍卖"><span class="toc-text">阿里司法拍卖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何使用-Git-辅助开发"><span class="toc-text">如何使用 Git 辅助开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#A-本地同步文件到-Git"><span class="toc-text">A 本地同步文件到 Git</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B-服务器-Clone-项目"><span class="toc-text">B 服务器 Clone 项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Git-CLone-Project"><span class="toc-text">Git CLone Project</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置服务器的开发环境"><span class="toc-text">配置服务器的开发环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#A-Mysql-的环境配置"><span class="toc-text">A Mysql 的环境配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B-如何配置服务器的环境变量"><span class="toc-text">B 如何配置服务器的环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Navicat-链接数据库"><span class="toc-text">Navicat 链接数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#每日自动运行"><span class="toc-text">每日自动运行</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Data-Analysis"><span class="toc-text">Data Analysis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Django-Map"><span class="toc-text">Django Map</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Add-Latitude-and-longitude"><span class="toc-text">Add Latitude and longitude</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Deploy"><span class="toc-text">Deploy</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Reference"><span class="toc-text">Reference</span></a></li></ol>
    </div>
  </div><div class="post-content"><p>司法拍卖数据可视化，主要涉及的知识点：Django 、 Python 、 HTML 、JS 、 Mysql<br><a id="more"></a></p>
<h1 id="Spyder"><a href="#Spyder" class="headerlink" title="Spyder"></a>Spyder</h1><h2 id="阿里司法拍卖"><a href="#阿里司法拍卖" class="headerlink" title="阿里司法拍卖"></a>阿里司法拍卖</h2><p>这部分的代码略去不提，有需要的伙伴可以给我发邮件。<code>afrunk7@gmail.com</code></p>
<h2 id="如何使用-Git-辅助开发"><a href="#如何使用-Git-辅助开发" class="headerlink" title="如何使用 Git 辅助开发"></a>如何使用 Git 辅助开发</h2><h3 id="A-本地同步文件到-Git"><a href="#A-本地同步文件到-Git" class="headerlink" title="A 本地同步文件到 Git"></a>A 本地同步文件到 Git</h3><p>首先，我在 Github 上创建了一个仓库,获取一个 Git 的仓库路径，然后在本地的开发环境使用 Git Bash 执行如下指令，同步我们的代码和文件到 Github 上。</p>
<p><img src="1.png" alt="获取创建好的仓库链接"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git init <span class="comment"># 创建一个本地 git 文件</span></span><br><span class="line">git add . <span class="comment"># 将本地的改动添加到待同步步骤</span></span><br><span class="line">git remote add origin <span class="string">'上面创建的仓库路径'</span> </span><br><span class="line"><span class="comment"># $ git remote add origin 'github仓库的地址'</span></span><br><span class="line">git commit -m <span class="string">'Test'</span> <span class="comment"># 更新注释为 Test</span></span><br><span class="line">git push -u origin master -f </span><br><span class="line"><span class="comment"># 第一次的更新的分支为 master 必须加 -f 否则报错 第一次执行命令需要后续不需要</span></span><br><span class="line">git push origin master </span><br><span class="line"><span class="comment"># 更新内容的固定格式</span></span><br></pre></td></tr></table></figure>
<p>这样子，我们就将在本地开发的项目都同步到 Github 仓库了，只需要在服务器上的 Pycharm 使用 Clone 该仓库，就可以直接运行项目了。避免在服务器上开发的效率低下问题，实现了 本地开发环境——远程开发环境的内容同步。</p>
<p>下面，我们执行如下的代码，将刚刚更新的内容同步到 Github。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">afrunk@DESKTOP-AQI8TCS MINGW64 /g/Github/SF_Taobao (master)</span><br><span class="line">$ git add .</span><br><span class="line">warning: LF will be replaced by CRLF <span class="keyword">in</span> .idea/workspace.xml.</span><br><span class="line">The file will have its original line endings <span class="keyword">in</span> your working directory.</span><br><span class="line"></span><br><span class="line">afrunk@DESKTOP-AQI8TCS MINGW64 /g/Github/SF_Taobao (master)</span><br><span class="line">$ git commit -m <span class="string">'Remade'</span></span><br><span class="line">[master ab535ce] Remade</span><br><span class="line"> <span class="number">4</span> files changed, <span class="number">100</span> insertions(+), <span class="number">18</span> deletions(-)</span><br><span class="line"> create mode <span class="number">100644</span> Images/<span class="number">1.</span>png</span><br><span class="line"></span><br><span class="line">afrunk@DESKTOP-AQI8TCS MINGW64 /g/Github/SF_Taobao (master)</span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入账号密码</span></span><br></pre></td></tr></table></figure>
<h3 id="B-服务器-Clone-项目"><a href="#B-服务器-Clone-项目" class="headerlink" title="B 服务器 Clone 项目"></a>B 服务器 Clone 项目</h3><p>首先，我们需要配置 Git 开发环境。然后将我们在本地上传的代码，Clone 下来即可。</p>
<p><img src="2.png" alt="配置 Pycharm的 git"></p>
<p>在 Pycharm 的 File-Settings - Version Control-Git ，将 Path to Git executable 中填入刚刚我们安装好的 Git.exe 的路径，选择确认。</p>
<p>在配置好 Clone 的路径之后，点击更新内容即可拉下来所有的文件。</p>
<p><img src="3.png" alt="获取创建好的仓库内容"></p>
<h3 id="Git-CLone-Project"><a href="#Git-CLone-Project" class="headerlink" title="Git CLone Project"></a>Git CLone Project</h3><p>我们也可以直接安装一个 git，然后直接使用 git clone git链接，就可以下载下来一个项目，该文件会存储在用户的文件夹下</p>
<p><img src="4.png" alt="git Clone"></p>
<h2 id="配置服务器的开发环境"><a href="#配置服务器的开发环境" class="headerlink" title="配置服务器的开发环境"></a>配置服务器的开发环境</h2><h3 id="A-Mysql-的环境配置"><a href="#A-Mysql-的环境配置" class="headerlink" title="A Mysql 的环境配置"></a>A Mysql 的环境配置</h3><p>参考该文章即可：<a href="https://blog.csdn.net/bobo553443/article/details/81383194" target="_blank" rel="noopener">确实是比较详细的 Mysql 部署和使用的入门级文档</a></p>
<h3 id="B-如何配置服务器的环境变量"><a href="#B-如何配置服务器的环境变量" class="headerlink" title="B 如何配置服务器的环境变量"></a>B 如何配置服务器的环境变量</h3><p>我装好 Mysql 之后发现不能使用，于是寻找 计算机的环境变量配置，和本地的开发环境不同。后面参考了 <a href="https://blog.csdn.net/bingbob/article/details/103267949" target="_blank" rel="noopener">该文章</a> 之后，发现可以使用 Windows + R，输入 sysdm.cpl 进入系统属性的配置窗口。将我们安装的 Mysql 的 BIn 目录添加到 Path 即可。</p>
<p>然后我们进入到 <code>Windows 管理工具-服务</code> 可以查看到 Mysql80 正在工作。</p>
<h3 id="Navicat-链接数据库"><a href="#Navicat-链接数据库" class="headerlink" title="Navicat 链接数据库"></a>Navicat 链接数据库</h3><p>为了提高开发效率，不再重复建表，我们可以使用 Navicat 导入表，将我们之前在本地抓取的数据都存入到数据库中。</p>
<p>使用 Navicat 的时候提示 1251 报错，解决方案：<a href="https://blog.csdn.net/OCEAN_C/article/details/89719578" target="_blank" rel="noopener">参考解决方法</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter user &apos;root&apos;@&apos;localhost&apos; identified with mysql_native_password by &apos;123456&apos;;</span><br><span class="line">Query OK, 0 rows affected (0.22 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.03 sec)</span><br></pre></td></tr></table></figure>
<p>然后我们在 Navicate 中链接数据库的用户密码就会被修改为 <code>root</code> and <code>123456</code> 。</p>
<p>将我们下载下来的项目中的数据库表导入到数据库中。</p>
<p>结果如下</p>
<p><img src="5.png" alt></p>
<h2 id="每日自动运行"><a href="#每日自动运行" class="headerlink" title="每日自动运行"></a>每日自动运行</h2><p>修改下数据库的配置，将各种库都配置好之后。设定 while 循环，每次运行后休眠1天时间即可。</p>
<h1 id="Data-Analysis"><a href="#Data-Analysis" class="headerlink" title="Data Analysis"></a>Data Analysis</h1><p>前面主要是配置服务器的环境和如何使用 Git 来同步项目代码。接下来的部分就是如何将我们获取到的数据进行可视化。首先，我们需要查看下数据格式和内容</p>
<p><img src="6.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">address 地址 需要进行提取</span><br><span class="line">url     拍卖品的链接</span><br><span class="line">first_price 起拍价 单位为k</span><br><span class="line">caution_monry 保证金 单位为元</span><br><span class="line">evaluation_price 评估价 单位为k</span><br><span class="line">price_increase 加价幅度 单位为元</span><br><span class="line">disposal_place 处置单位</span><br><span class="line">date_1  时间</span><br></pre></td></tr></table></figure>
<h2 id="Django-Map"><a href="#Django-Map" class="headerlink" title="Django Map"></a>Django Map</h2><p>为了可以展示数据，我们需要构建一个Web页面。这里使用的是 Django 作为后端框架，我们首先创建一个 Django 项目，修改其数据库的配置和基本语言配置，以及新建一个应用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SF_Web/settings.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库配置</span></span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">'default'</span>: &#123;</span><br><span class="line">        <span class="string">'ENGINE'</span>: <span class="string">'django.db.backends.mysql'</span>,</span><br><span class="line">        <span class="string">'NAME'</span>: <span class="string">""</span>, <span class="comment">#数据库名称</span></span><br><span class="line">        <span class="string">'USER'</span>:<span class="string">""</span>, <span class="comment"># 数据库账号</span></span><br><span class="line">        <span class="string">'PASSWORD'</span>:<span class="string">""</span>, <span class="comment"># 数据库密码</span></span><br><span class="line">        <span class="string">'HOST'</span>:<span class="string">"127.0.0.1"</span> <span class="comment"># 默认路径</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 语言配置</span></span><br><span class="line">LANGUAGE_CODE = <span class="string">'zh-hans'</span></span><br><span class="line"><span class="comment"># 时区配置</span></span><br><span class="line">TIME_ZONE = <span class="string">'Asia/Shanghai'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建一个应用 Terminal</span></span><br><span class="line">python manage.py startapp map</span><br></pre></td></tr></table></figure>
<p><img src="7.png" alt="构建成功后的页面"></p>
<p>如何才能将数据库的数据展示在地图上呢？这里使用的是百度的开源 API，调用百度地图实现标点效果。首先需要<a href="http://lbsyun.baidu.com/apiconsole/key#/home" target="_blank" rel="noopener">注册</a>一个账户，申请<strong>百度地图浏览器端应用</strong>，获取到密匙。<br><img src="8.png" alt="申请密匙"></p>
<p>拿到密匙之后，我们需要构建 View 视图来请求数据库的经纬度并将请求到的数据传递到 HTML 页面上进行渲染，然后通过路由来请求视图函数，然后通过百度地图的API 就可以在地图上标记内容了。</p>
<p>因为，我们之前的爬虫并没有补充经纬度，所以现在先构建一个 Demo 来实现对某个地点的标点效果。</p>
<p>在创建的 APP 下的 models.py 中添加如下语句<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">map/models.py</span><br><span class="line"></span><br><span class="line">class address_info(models.Model):</span><br><span class="line">    longitude = models.FloatField() # 经度</span><br><span class="line">    latitude = models.FloatField() #维度</span><br><span class="line">    data = models.CharField(max_length=200) # 标记被点击所触发的内容</span><br></pre></td></tr></table></figure></p>
<p>执行同步数据库的操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>
<p>查看数据库，并在数据库中插入测试数据<br><img src="9.png" alt="数据库表"><br><img src="10.png" alt="测试数据"></p>
<p>添加 View 视图函数来请求数据库的经纬度数据，并将其封装成 Json 格式传递给我们指定的 HTML 页面，然后将该视图函数和 URL 绑定，方便我们请求该路由时即触发该函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">map/views.py</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> map.models <span class="keyword">import</span> address_info</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(request)</span>:</span></span><br><span class="line">    address_point = address_info.objects.all()</span><br><span class="line">    address_longitude = []</span><br><span class="line">    address_latitude = []</span><br><span class="line">    address_data = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(address_point)):</span><br><span class="line">        address_longitude.append(address_point[i].longitude)</span><br><span class="line">        address_latitude.append(address_point[i].latitude)</span><br><span class="line">        address_data.append(address_point[i].data)</span><br><span class="line">    print(address_longitude,address_latitude)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'address.html'</span>,</span><br><span class="line">                  &#123;<span class="string">'address_longitude'</span>: json.dumps(address_longitude),</span><br><span class="line">                   <span class="string">'address_latitude'</span>: json.dumps(address_latitude), <span class="string">'address_data'</span>: json.dumps(address_data)&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">#address_longitude为若干个坐标的经度</span></span><br><span class="line"><span class="comment">#address_latitude为若干个坐标的维度</span></span><br><span class="line"><span class="comment">#address_data为标记上所需要显示的数据</span></span><br></pre></td></tr></table></figure>
<p>修改路由</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SF_Web/urls.py</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> map <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">'address/'</span>, views.test)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>添加绑定视图函数的 HTML 页面，其中包含有如何调用 View 视图函数传递过去的数据，以及如何使用百度的地图 API。核心部分在 Script ，里面包含了如何调用穿过来的数据进行标点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">templates/address.html</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1.0, user-scalable=no&quot;/&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">        body, html &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line">            margin: 0;</span><br><span class="line">            font-family: &quot;微软雅黑&quot;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #allmap &#123;</span><br><span class="line">            height: 700px;</span><br><span class="line">            width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #r-result &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;</span><br><span class="line">            src=&quot;http://api.map.baidu.com/api?v=2.0&amp;ak=s3x99zDaiDVq0tMMuQoMaspWidTkDTl3&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;title&gt;经纬度定位&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=&quot;allmap&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;r-result&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;button&quot; value=&quot;获取我的位置&quot; onclick=&quot;get_location()&quot;/&gt;</span><br><span class="line">    //点击按钮 点击之后会出现所有的标点</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    // 百度地图API功能</span><br><span class="line"></span><br><span class="line">    var map = new BMap.Map(&quot;allmap&quot;);</span><br><span class="line">    // 这个是默认的我的地址 可以自行设置</span><br><span class="line">    map.centerAndZoom(new BMap.Point(113.264385,23.129112), 18);</span><br><span class="line">    map.enableScrollWheelZoom(true);</span><br><span class="line">    var navigationControl = new BMap.NavigationControl(&#123;</span><br><span class="line">        // 靠左上角位置</span><br><span class="line">        anchor: BMAP_ANCHOR_TOP_LEFT,</span><br><span class="line">        // LARGE类型</span><br><span class="line">        type: BMAP_NAVIGATION_CONTROL_LARGE,</span><br><span class="line">        // 启用显示定位</span><br><span class="line">        enableGeolocation: true</span><br><span class="line">    &#125;);</span><br><span class="line">    map.addControl(navigationControl);</span><br><span class="line"></span><br><span class="line">    function get_location() &#123;</span><br><span class="line"></span><br><span class="line">        var address_latitude =&#123;&#123; address_latitude |safe&#125;&#125;;</span><br><span class="line">        var address_longitude =&#123;&#123; address_longitude|safe &#125;&#125;;</span><br><span class="line">        var address_data =&#123;&#123; address_data |safe&#125;&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        var point = []; //存放标注点经纬信息的数组</span><br><span class="line">        var marker = []; //存放标注点对象的数组</span><br><span class="line">        for (var i = 0; i &lt; address_longitude.length; i++) &#123;</span><br><span class="line">            point[i] = new BMap.Point(address_longitude[i], address_latitude[i]); //循环生成新的地图点</span><br><span class="line">            marker[i] = new BMap.Marker(point[i]); //按照地图点坐标生成标记</span><br><span class="line">            map.addOverlay(marker[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        for (i = 0; i &lt; marker.length; i++) &#123;</span><br><span class="line">            (function () &#123;</span><br><span class="line">                var index = i;</span><br><span class="line">                marker[index].addEventListener(&apos;click&apos;, function () &#123;</span><br><span class="line">                    this.openInfoWindow(new BMap.InfoWindow(address_data[index]));</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;)();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>效果如下<br><img src="11.png" alt="标点效果"></p>
<p>我们的测试数据的经纬度是怎么来的呢？我们可以打开百度 或 <a href="https://lbs.amap.com/console/show/picker" target="_blank" rel="noopener">高德地图开放平台</a>，选择 开发支持——坐标拾取器，然后在这里输入地址即可</p>
<p><img src="12.png" alt="坐标拾取器"></p>
<p>但是并不是所有的地址都可以获取到经纬度</p>
<p><img src="13.png" alt="地址反查经纬度"></p>
<p>因为我们的爬虫获取到的数据并没有经纬度，所以我们接下来就需要如何将地址转换成经纬度，追加到我们之前的爬虫表中去。</p>
<h2 id="Add-Latitude-and-longitude"><a href="#Add-Latitude-and-longitude" class="headerlink" title="Add Latitude and longitude"></a>Add Latitude and longitude</h2><p>使用下面的脚本就是可以为我们的爬虫的数据表添加经纬度的数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">address_LL.py</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">将爬虫抓到的所有地址的经纬度通过高德地图的API转换出来</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># 数据库配置</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">db = pymysql.connect(host=<span class="string">'127.0.0.1'</span>,</span><br><span class="line">                     port=<span class="number">3306</span>,</span><br><span class="line">                     user=<span class="string">'root'</span>,</span><br><span class="line">                     password=<span class="string">'password'</span>,</span><br><span class="line">                     db=<span class="string">'sf'</span>,</span><br><span class="line">                     charset=<span class="string">'utf8'</span>)</span><br><span class="line">cursor = db.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># try:</span></span><br><span class="line"><span class="comment"># 从表 sf_taobao 表中搜索数据</span></span><br><span class="line">sql =<span class="string">'select * from sf_taobao'</span></span><br><span class="line">cursor.execute(sql)  <span class="comment"># 执行命令</span></span><br><span class="line">content = cursor.fetchall() <span class="comment"># 返回列表类型</span></span><br><span class="line"><span class="comment"># 遍历列表</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> content:</span><br><span class="line">    print(i[<span class="number">0</span>])</span><br><span class="line">    <span class="comment"># 获取 address 的数据 因为是第一列 取每个数据的第一个元素</span></span><br><span class="line">    keyword = i[<span class="number">0</span>]</span><br><span class="line">    <span class="comment"># 拼接到高德地图的坐标拾取器访问链接</span></span><br><span class="line">    url = <span class="string">'https://restapi.amap.com/v3/place/text?s=rsv3&amp;children=&amp;key=8325164e247e15eea68b59e89200988b&amp;page=1&amp;offset=10&amp;city=430500&amp;language=zh_cn&amp;callback=jsonp_751534_&amp;platform=JS&amp;logversion=2.0&amp;sdkversion=1.3&amp;appname=https%3A%2F%2Flbs.amap.com%2Fconsole%2Fshow%2Fpicker&amp;csid=4A507AE3-28EE-47D5-9EB9-FB7CCA482B49&amp;keywords=&#123;&#125;'</span>.format(keyword)</span><br><span class="line">    <span class="comment"># 关键是 cookie 值</span></span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">"Accept"</span>: <span class="string">"*/*"</span>,</span><br><span class="line">        <span class="string">"Accept-Encoding"</span>: <span class="string">"gzip, deflate, br"</span>,</span><br><span class="line">        <span class="string">"Accept-Language"</span>: <span class="string">"zh-HK,zh;q=0.9,zh-CN;q=0.8,en;q=0.7,en-US;q=0.6,zh-TW;q=0.5"</span>,</span><br><span class="line">        <span class="string">"Connection"</span>: <span class="string">"keep-alive"</span>,</span><br><span class="line">        <span class="string">"Cookie"</span>: <span class="string">"UM_distinctid=171dabe788a2af-0658bec6864d5d-5313f6f-1fa400-171dabe788b724; cna=EjzNFcjlwBgCAW41PyFszgpg; isg=BHJyrIOUeD9afEc1BovWZLdew7hUA3adVoYmqTxK6CUQzxDJJJbRrMZmu2Pzv-41; l=eBSt4d_eqKMUUqYYBO5Zlurza77tXIObzsPzaNbMiIHca6OO6hL7UNQcuqCyJdtj_t5jTetPijrhsdE9rRUU-nkDBeYIVi3iOe96-e1.."</span>,</span><br><span class="line">        <span class="string">"Host"</span>: <span class="string">"restapi.amap.com"</span>,</span><br><span class="line">        <span class="string">"Referer"</span>: <span class="string">"https//lbs.amap.com/console/show/picker"</span>,</span><br><span class="line">        <span class="string">"Sec-Fetch-Dest"</span>: <span class="string">"script"</span>,</span><br><span class="line">        <span class="string">"Sec-Fetch-Mode"</span>: <span class="string">"no-cors"</span>,</span><br><span class="line">        <span class="string">"Sec-Fetch-Site"</span>: <span class="string">"same-site"</span>,</span><br><span class="line">        <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.163 Safari/537.36"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 请求到的数据转换成 txt 格式</span></span><br><span class="line">    <span class="comment"># 必须去掉 jsonp_751534_( 内容数据 ) 去掉前面的部分可以使用替换 去掉后面的部分直接切片即可</span></span><br><span class="line">    <span class="comment"># 请求数据</span></span><br><span class="line">    con = requests.get(url,headers=headers).text.replace(<span class="string">'jsonp_751534_('</span>,<span class="string">''</span>)[:<span class="number">-1</span>]</span><br><span class="line">    print(con)</span><br><span class="line">    <span class="comment"># 请求到的数据转换成 dict 格式</span></span><br><span class="line">    con_dict = json.loads(con)</span><br><span class="line">    print(con_dict)</span><br><span class="line">    <span class="comment"># 提取经纬度</span></span><br><span class="line">    <span class="comment"># 如果提取不到 则跳过</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        data = con_dict[<span class="string">'pois'</span>][<span class="number">0</span>][<span class="string">'location'</span>]</span><br><span class="line">        <span class="comment"># 将字符串的数据切割成2个部分值 一个经度一个纬度  必须进行一次转换成 str 才可</span></span><br><span class="line">        final_data = str(data).split(<span class="string">','</span>)</span><br><span class="line">        <span class="comment"># 输出经纬度进程提示</span></span><br><span class="line">        print(final_data[<span class="number">0</span>])</span><br><span class="line">        print(final_data[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># try:</span></span><br><span class="line">        <span class="comment"># 更新数据时报错 转义字符</span></span><br><span class="line">        <span class="comment"># https://yq.aliyun.com/articles/618481?type=2 如何使用 escape 函数</span></span><br><span class="line">        <span class="comment"># 如何解决转义字符的问题 https://blog.csdn.net/u013075468/article/details/51455745?utm_source=blogxgwz7</span></span><br><span class="line">        <span class="comment"># update_sql = "UPDATE sf_taobao set longitude='12' where url=%s UNION UPDATE sf_taobao set latitude='12' where url=%s"%db.escape(i[1]) %db.escape(i[1])</span></span><br><span class="line">        <span class="comment"># print(update_sql)</span></span><br><span class="line">        <span class="comment"># 将经度更新进去</span></span><br><span class="line">        cursor.execute(<span class="string">"UPDATE sf_taobao set longitude=%s where url=%s"</span>%(final_data[<span class="number">0</span>],db.escape(i[<span class="number">1</span>])))</span><br><span class="line">        <span class="comment"># 不填加的话更新数据但是不改变值</span></span><br><span class="line">        db.commit()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 将纬度更新进去</span></span><br><span class="line">        cursor.execute(<span class="string">"UPDATE sf_taobao set latitude=%s where url=%s"</span>%(final_data[<span class="number">1</span>],db.escape(i[<span class="number">1</span>])))</span><br><span class="line">        db.commit()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># except:</span></span><br><span class="line">        <span class="comment">#     print("出错了")</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># except:</span></span><br><span class="line"><span class="comment">#     pass</span></span><br></pre></td></tr></table></figure>
<p><img src="14.png" alt="经纬度"></p>
<p>转换后的经纬度如图，可以很清晰的看到并不是所有的数据都可以进行经纬度的转换的。熟悉 Django 开发的朋友就明白，我们下一步，就是把这个有经纬度的数据，写入到我们之前构建的 Model 表中去。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">address_LL_map.py</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">将转换出来的爬虫表中的经纬度和地址名称查询出来，去掉空值写入到 django 的 map_address_info 表中</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment"># 数据库配置</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">db = pymysql.connect(host=<span class="string">'127.0.0.1'</span>,</span><br><span class="line">                     port=<span class="number">3306</span>,</span><br><span class="line">                     user=<span class="string">'root'</span>,</span><br><span class="line">                     password=<span class="string">'password'</span>,</span><br><span class="line">                     db=<span class="string">'sf'</span>,</span><br><span class="line">                     charset=<span class="string">'utf8'</span>)</span><br><span class="line">cursor = db.cursor()</span><br><span class="line"><span class="comment"># 查找爬虫的表</span></span><br><span class="line">sql =<span class="string">'select * from sf_taobao'</span></span><br><span class="line">cursor.execute(sql)  <span class="comment"># 执行命令</span></span><br><span class="line">content = cursor.fetchall() <span class="comment"># 转换成列表形式</span></span><br><span class="line"><span class="comment"># 遍历列表</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> content:</span><br><span class="line">    <span class="comment"># 看纬度的数据是否为0</span></span><br><span class="line">    <span class="keyword">if</span> i[<span class="number">9</span>]==<span class="string">'0'</span>:</span><br><span class="line">        print(i)</span><br><span class="line">    <span class="comment"># 如果不为0 则插入到 django 的表中去</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># db.escape() 插入data 时 转义字符报错</span></span><br><span class="line">        sql = <span class="string">"INSERT INTO map_address_info(longitude,latitude, data)VALUES('%s', '%s',  %s)"</span>%(i[<span class="number">8</span>],i[<span class="number">9</span>],db.escape(i[<span class="number">0</span>]))</span><br><span class="line">        <span class="comment"># 执行sql语句</span></span><br><span class="line">        cursor.execute(sql)</span><br><span class="line">        <span class="comment"># 执行sql语句</span></span><br><span class="line">        db.commit()</span><br></pre></td></tr></table></figure>
<p><img src="15.png" alt="经纬度入表"></p>
<p>然后我们再来运行 Django 项目，看看效果</p>
<p><img src="16.png" alt="可视化效果图"></p>
<p>因为筛选后的全国数据比较大，最少有4k多，所以我这边做了一个切片，只在地图上标记500条数据。</p>
<h2 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h2><p>我们现在做出来一个雏形了，目的肯定是为了部署到服务器上，让大家都可以看到的。所以接下来就是如何使用 Windows 服务器来部署我们的项目。</p>
<p>因为之前学过的服务器部署网站使用的就是 IIS，但是出现了各种问题。现在考虑使用 Apache + mod_wsgi 来部署。</p>
<p>先按照这个文章 <a href="https://blog.csdn.net/weixin_40754816/article/details/80955817" target="_blank" rel="noopener">django在windows下的部署（Apache+mod_wsgi）</a>，部署 Apache，但是端口报错，造成该问题的原因是因为我直接添加了端口内容，而没有删除下面默认的配置。</p>
<p>该文章解决了这个问题 ：<a href="https://blog.csdn.net/jayxujia123/article/details/25811813" target="_blank" rel="noopener">解决apache开始时出现的“ (OS 10048)通常每个套接字地址(协议/网络地址/端口)只允许使用一次” 这个错误</a>  ,然后在服务器的本地服务器启动 Apache 的服务，输入我们在 配置文件中输入的端口好 5001，就可以访问到 Apache的 网站内容了。</p>
<p><img src="22.png" alt="启动 apache "><br><img src="23.png" alt="访问 apache "></p>
<p>下面是我们配置 Django 和 Apache 的关联时会用到的一些配置内容。</p>
<blockquote>
<p>  LoadFile “c:/users/administrator/anaconda3/python37.dll”<br>    LoadModule wsgi_module “c:/users/administrator/anaconda3/lib/site-packages/mod_wsgi/server/mod_wsgi.cp37-win_amd64.pyd”<br>    WSGIPythonHome “c:/users/administrator/anaconda3”</p>
</blockquote>
<p>跟着上面的步骤修改好了之后，重启服务器，就可以发现我们可以在本地的5001端口查看到网站了。但是我们希望的是可以在局域网通过ip地址访问到网站，所以我们将 apache 的 listen 设置为服务器的 私网 ip ，然后 Django 就会报错了，需要我们修改 Settings.py 中的 ip 配置。 <code>ALLOWED_HOSTS = []</code> 修改为 <code>ALLOWED_HOSTS = [&#39;*&#39;]</code> 即可，然后我们在服务器设置中重启 apache 服务，然后访问：<a href="http://172.19.60.95:5001/address/" target="_blank" rel="noopener">DJango 项目-sf Data Analysis</a> 在服务器的局域网内是可以访问到的，想当于本地地址。但是外网肯定访问不到，因为这个是私网 IP，相当于是局域网，将前面的私网 IP 更换成公网 IP <a href="139.196.86.207:5001/address/" target="_blank" rel="noopener">DJango 项目-sf Data Analysis</a> 即可访问我们部署好的 Django 项目了。</p>
<p><img src="25.png" alt="访问 apache "></p>
<p>这就意味着，我们后续部署不同的 Django 项目，只需要使用 Git clone 项目文件，配置好运行环境和数据库文件之后，在 Apache 的配置文件中修改关联的 Project.Settings 即可实现项目的部署。</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="https://www.jianshu.com/p/91cc0e5171f5?tdsourcetag=s_pctim_aiomsg" target="_blank" rel="noopener">Django 地图标点</a></li>
<li><a href="https://www.jianshu.com/p/1a9531d2f153" target="_blank" rel="noopener">Django 标点</a></li>
<li><a href="https://blog.csdn.net/weixin_40754816/article/details/80955817" target="_blank" rel="noopener">django在windows下的部署（Apache+mod_wsgi）</a></li>
</ul>

      </div>
      
      <footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/Django/">Django</a>
            <a href="/tags/Mysql/">Mysql</a>
            <a href="/tags/Spyder/">Spyder</a>
            </div>
        
        <nav class="post-nav"><a class="next" href="/2020/04/10/20-Mysql-Crash-Course/">
        <span class="next-text nav-default">Mysql Crash Course</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"></div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:afrunk7@gmail.com" class="iconfont icon-email" title="email"></a>
        <a href="https://github.com/afrunk" class="iconfont icon-github" title="github"></a>
        <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">&copy;2019 - 2021<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Afrunk</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>
